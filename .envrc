#!/usr/bin/env bash
# Load nix development environment
if ! has nix_direnv_version || ! nix_direnv_version 3.1.0; then
  source_url "https://raw.githubusercontent.com/nix-community/nix-direnv/3.1.0/direnvrc" "sha256-yMJ2OVMzrFaDPn7q8nCBZFRYpL/f0RcHzhmw/i6btJM="
fi

use flake

# Go module cache - project-local to avoid permission issues
export GOPATH="$PWD/.go"
export GOMODCACHE="$PWD/.go/pkg/mod"
export GOCACHE="$PWD/.go/cache"

PATH_add scripts

# MCP CLI config
export MCP_CONFIG_PATH=".mcp_servers.json"

# Load local overrides (credentials, etc.) - not tracked in git
if [[ -f .envrc.local ]]; then
  # shellcheck source=/dev/null
  source .envrc.local
fi
